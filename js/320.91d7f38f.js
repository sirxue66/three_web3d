"use strict";(self["webpackChunkweb3d"]=self["webpackChunkweb3d"]||[]).push([[320],{1320:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var r=n(3396),a=n(4870),s=n(1114),o=n(4543),i=n(2236),c={__name:"example06",setup(e){const t=(0,a.iH)(null);return(0,r.Y3)((async()=>{const e=document.body.clientWidth,n=document.body.clientHeight,r=new s.xsS,a=new i.x,c=await a.loadAsync("/three_web3d/assets_3d/blaubeuren_2k.hdr");c.mapping=s.dSO,r.background=c,r.environment=c;const l=new s.cPb(75,e/n,1,1e3);l.position.set(0,-10,95),r.add(l);const u=new s.xo$(15),d=new s.Wid({color:15132922,transparent:!0,metalness:.9,roughness:0}),h=new s.Kj0(u,d);h.position.set(0,10,0),r.add(h);const p=new o.z(l,t.value);p.enableDamping=!0;const f=new s.CP7({canvas:t.value,antialias:!0});f.setSize(e,n);const m=()=>{f.render(r,l),requestAnimationFrame(m)};return window.addEventListener("resize",(()=>{const e=document.body.clientWidth,t=document.body.clientHeight;l.aspect=e/t,l.updateProjectionMatrix(),f.setSize(e,t)}),!1),m()})),(e,n)=>((0,r.wg)(),(0,r.iD)("canvas",{ref_key:"canvasDom",ref:t},null,512))}};const l=c;var u=l},2236:function(e,t,n){n.d(t,{x:function(){return a}});var r=n(1114);class a extends r.yxD{constructor(e){super(e),this.type=r.cLu}parse(e){const t=-1,n=1,a=2,s=3,o=4,i=function(e,r){switch(e){case n:console.error("THREE.RGBELoader Read Error: "+(r||""));break;case a:console.error("THREE.RGBELoader Write Error: "+(r||""));break;case s:console.error("THREE.RGBELoader Bad File Format: "+(r||""));break;default:case o:console.error("THREE.RGBELoader: Error: "+(r||""))}return t},c=1,l=2,u=4,d="\n",h=function(e,t,n){const r=128;t=t||1024;let a=e.pos,s=-1,o=0,i="",c=String.fromCharCode.apply(null,new Uint16Array(e.subarray(a,a+r)));while(0>(s=c.indexOf(d))&&o<t&&a<e.byteLength)i+=c,o+=c.length,a+=r,c+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(a,a+r)));return-1<s&&(!1!==n&&(e.pos+=o+s+1),i+c.slice(0,s))},p=function(e){const t=/^#\?(\S+)/,r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,d=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,p={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let f,m;if(e.pos>=e.byteLength||!(f=h(e)))return i(n,"no header found");if(!(m=f.match(t)))return i(s,"bad initial token");p.valid|=c,p.programtype=m[1],p.string+=f+"\n";while(1){if(f=h(e),!1===f)break;if(p.string+=f+"\n","#"!==f.charAt(0)){if((m=f.match(r))&&(p.gamma=parseFloat(m[1])),(m=f.match(a))&&(p.exposure=parseFloat(m[1])),(m=f.match(o))&&(p.valid|=l,p.format=m[1]),(m=f.match(d))&&(p.valid|=u,p.height=parseInt(m[1],10),p.width=parseInt(m[2],10)),p.valid&l&&p.valid&u)break}else p.comments+=f+"\n"}return p.valid&l?p.valid&u?p:i(s,"missing image size specifier"):i(s,"missing format specifier")},f=function(e,t,r){const a=t;if(a<8||a>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(a!==(e[2]<<8|e[3]))return i(s,"wrong scanline width");const c=new Uint8Array(4*t*r);if(!c.length)return i(o,"unable to allocate buffer space");let l=0,u=0;const d=4*a,h=new Uint8Array(4),p=new Uint8Array(d);let f=r;while(f>0&&u<e.byteLength){if(u+4>e.byteLength)return i(n);if(h[0]=e[u++],h[1]=e[u++],h[2]=e[u++],h[3]=e[u++],2!=h[0]||2!=h[1]||(h[2]<<8|h[3])!=a)return i(s,"bad rgbe scanline format");let t,r=0;while(r<d&&u<e.byteLength){t=e[u++];const n=t>128;if(n&&(t-=128),0===t||r+t>d)return i(s,"bad scanline data");if(n){const n=e[u++];for(let e=0;e<t;e++)p[r++]=n}else p.set(e.subarray(u,u+t),r),r+=t,u+=t}const o=a;for(let e=0;e<o;e++){let t=0;c[l]=p[e+t],t+=a,c[l+1]=p[e+t],t+=a,c[l+2]=p[e+t],t+=a,c[l+3]=p[e+t],l+=4}f--}return c},m=function(e,t,n,r){const a=e[t+3],s=Math.pow(2,a-128)/255;n[r+0]=e[t+0]*s,n[r+1]=e[t+1]*s,n[r+2]=e[t+2]*s,n[r+3]=1},w=function(e,t,n,a){const s=e[t+3],o=Math.pow(2,s-128)/255;n[a+0]=r.A5E.toHalfFloat(Math.min(e[t+0]*o,65504)),n[a+1]=r.A5E.toHalfFloat(Math.min(e[t+1]*o,65504)),n[a+2]=r.A5E.toHalfFloat(Math.min(e[t+2]*o,65504)),n[a+3]=r.A5E.toHalfFloat(1)},g=new Uint8Array(e);g.pos=0;const b=p(g);if(t!==b){const e=b.width,n=b.height,a=f(g.subarray(g.pos),e,n);if(t!==a){let t,s,o;switch(this.type){case r.VzW:o=a.length/4;const e=new Float32Array(4*o);for(let t=0;t<o;t++)m(a,4*t,e,4*t);t=e,s=r.VzW;break;case r.cLu:o=a.length/4;const n=new Uint16Array(4*o);for(let t=0;t<o;t++)w(a,4*t,n,4*t);t=n,s=r.cLu;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:e,height:n,data:t,header:b.string,gamma:b.gamma,exposure:b.exposure,type:s}}}return null}setDataType(e){return this.type=e,this}load(e,t,n,a){function s(e,n){switch(e.type){case r.VzW:case r.cLu:e.encoding=r.rnI,e.minFilter=r.wem,e.magFilter=r.wem,e.generateMipmaps=!1,e.flipY=!0;break}t&&t(e,n)}return super.load(e,s,n,a)}}}}]);